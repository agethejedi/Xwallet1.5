/* === Base =========================================================== */
:root{
  --bg:#0c1117; --card:#121826; --text:#e6e7ea; --muted:#9aa4b2;
  --border:#262f40; --accent:#06b6d4; --danger:#ef4444; --warn:#f59e0b; --ok:#10b981;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
a{color:#7dd3fc;text-decoration:none}a:hover{text-decoration:underline}
.container{max-width:1100px;margin:0 auto;padding:24px}

/* nav / hero / cards / sidebar -------------------------------------- */
.nav{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.brand{font-weight:700;font-size:18px}.brand .x{color:#22d3ee;margin-right:6px}
.cta .btn{margin-left:8px}
.hero .lead{color:var(--muted);max-width:850px}
.badge{display:inline-block;padding:6px 10px;background:#0b1220;border:1px solid var(--border);border-radius:999px;margin-right:8px;color:var(--muted)}

.section-title{font-weight:700;margin:18px 0 10px}
.app-grid{display:grid;grid-template-columns:260px 1fr;gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px}
.sidebar .item{padding:12px;border-radius:10px;border:1px solid var(--border);margin-bottom:10px;cursor:pointer}
.sidebar .item.active{background:linear-gradient(90deg,#0d1b2a,#0f2d2f);border-color:#143a40}
.flex{display:flex;gap:8px;align-items:center}
.sep{border:none;border-top:1px solid var(--border);margin:12px 0}
.label{font-weight:700;margin-bottom:6px}
.small{color:var(--muted);font-size:12px}
.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace}

/* buttons / inputs --------------------------------------------------- */
.btn{background:#0b1220;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px 12px;cursor:pointer}
.btn:hover{border-color:#334155}
.btn.primary{background:linear-gradient(90deg,#06b6d4,#22d3ee);color:#041019;border:0;font-weight:700}
.btn.ghost{background:transparent;border:1px solid var(--border)}
.icon-btn{background:transparent;border:1px solid var(--border);border-radius:8px;color:var(--muted);padding:6px 8px;cursor:pointer}
.icon-btn:hover{color:var(--text);border-color:#48556a}
input,select,textarea{width:100%;background:#0b1220;border:1px solid var(--border);color:var(--text);border-radius:10px;padding:10px}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid var(--border);padding:10px 6px;text-align:left}

/* lock modal --------------------------------------------------------- */
.lock{position:fixed;inset:0;background:#0008;display:none;align-items:center;justify-content:center;z-index:60}
.lock.active{display:flex}
.lock .panel{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;max-width:420px;width:100%}

/* === Risk Review modal ============================================= */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:#0008;z-index:70}
.modal.active{display:flex}
.modal__panel{background:var(--card);border:1px solid var(--border);border-radius:14px;max-width:560px;width:100%;padding:18px}
.modal__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.modal__actions{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}

/* === FIXED: Risk Meter (visible, animated) ========================= */
.risk-meter{margin:6px 0 10px}
.risk-meter__scale{
  position:relative;
  height:18px;
  border-radius:999px;
  background:#0b1220;              /* solid dark track */
  border:1px solid var(--border);
  overflow:hidden;
}
.risk-meter__bar{
  position:absolute;
  left:0;top:0;bottom:0;
  width:calc(var(--score,0)*1%);
  background:linear-gradient(90deg,
    #10b981 0% 60%,
    #f59e0b 60% 85%,
    #ef4444 85% 100%);
  border-radius:999px;
  box-shadow:0 0 4px #000 inset;
  transition:width .6s ease;
}
.risk-meter__labels{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:6px}
.risk-meter__score{margin-top:6px;font-weight:700}

/* Factors ------------------------------------------------------------ */
.risk-factors{display:grid;gap:8px;margin-top:10px}
.factor{display:flex;align-items:flex-start;gap:8px;border:1px solid var(--border);border-radius:10px;padding:8px}
.factor__badge{font-size:12px;padding:4px 8px;border-radius:999px;color:#061416;font-weight:700}
.factor--low  .factor__badge{background:var(--ok)}
.factor--med  .factor__badge{background:var(--warn)}
.factor--high .factor__badge{background:var(--danger)}

/* Warning copy ------------------------------------------------------- */
.risk-warning{border:1px solid #4c1d1d;background:#1b0b0b;border-radius:12px;padding:12px;margin-top:10px;color:#fca5a5}
.checkbox{display:flex;align-items:center;gap:8px;margin-top:8px}

/* Risk chips on history items --------------------------------------- */
.chip{display:inline-block;border-radius:999px;padding:2px 8px;font-size:11px;border:1px solid var(--border);margin-left:6px}
.chip.low{background:#072d26;color:#6ee7b7;border-color:#0f3d35}
.chip.med{background:#3a2b08;color:#fde68a;border-color:#6b4d0e}
.chip.high{background:#3b0a0a;color:#fca5a5;border-color:#7f1d1d}

/* send form ---------------------------------------------------------- */
.send-form{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:8px;align-items:center}
@media (max-width:840px){.app-grid{grid-template-columns:1fr}.send-form{grid-template-columns:1fr}}